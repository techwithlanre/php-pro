{
  "scopeName": "source.dql",
  "name": "Doctrine DQL",
  "fileTypes": ["dql"],
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#numbers" },
    { "include": "#keywords" },
    { "include": "#identifiers" },
    { "include": "#operators" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        { "name": "comment.line.double-dash.dql", "match": "--.*$" },
        { "name": "comment.block.dql", "begin": "/\\*", "end": "\\*/" }
      ]
    },
    "strings": {
      "patterns": [
        { "name": "string.quoted.single.dql", "begin": "'", "end": "'", "patterns": [{ "name": "constant.character.escape.dql", "match": "''" }] },
        { "name": "string.quoted.double.dql", "begin": "\"", "end": "\"", "patterns": [{ "name": "constant.character.escape.dql", "match": "\"\"" }] }
      ]
    },
    "numbers": {
      "patterns": [
        { "name": "constant.numeric.dql", "match": "\\b\\d+(?:\\.\\d+)?\\b" }
      ]
    },
    "keywords": {
      "patterns": [
        { "name": "keyword.control.dql", "match": "\\b(SELECT|FROM|WHERE|AND|OR|NOT|IN|IS|NULL|LIKE|BETWEEN|EXISTS|JOIN|INNER|LEFT|RIGHT|OUTER|ON|GROUP\\s+BY|ORDER\\s+BY|HAVING|AS|DISTINCT|UPDATE|DELETE|INSERT|INTO|SET|VALUES)\\b" },
        { "name": "keyword.operator.dql", "match": "\\b(NEW|INSTANCE\\s+OF|MEMBER\\s+OF|EMPTY)\\b" }
      ]
    },
    "identifiers": {
      "patterns": [
        { "name": "variable.parameter.dql", "match": ":[A-Za-z_][A-Za-z0-9_]*\\b" },
        { "name": "variable.language.dql", "match": "\\?[0-9]+\\b" },
        { "name": "entity.name.type.dql", "match": "\\b[A-Za-z_][A-Za-z0-9_]*(?:\\\\[A-Za-z_][A-Za-z0-9_]*)+\\b" },
        { "name": "entity.name.function.dql", "match": "\\b[A-Za-z_][A-Za-z0-9_]*\\b(?=\\s*\\()" }
      ]
    },
    "operators": {
      "patterns": [
        { "name": "keyword.operator.dql", "match": "[=<>!]+|\\b(CONCAT|SUBSTRING|LOWER|UPPER|TRIM|LENGTH|COALESCE|NULLIF|ABS|CEIL|FLOOR|MOD|ROUND|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP)\\b" },
        { "name": "punctuation.separator.dql", "match": "[(),.]" }
      ]
    }
  }
}

